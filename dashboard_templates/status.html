<!DOCTYPE html>
<html>
<head>
    <title>
        {% if workflow %}
            {{ workflow }} Workflow Runs
        {% elif project %}
            {{ project.repo_owner }}/{{ project.repo_name }} Workflow Runs
        {% else %}
            Workflow Runs
        {% endif %}
    </title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script>
        function filterStatus() {
            const filter = document.getElementById('statusFilter').value.toLowerCase();
            const rows = document.querySelectorAll('table tbody tr');
            rows.forEach(row => {
                const status = row.querySelector('.status').textContent.toLowerCase();
                row.style.display = status.includes(filter) || filter === 'all' ? '' : 'none';
            });
        }
    </script> 
</head>
<body>
    {% if project %}
        <h2>Workflow Runs for {{ project.repo_owner }}/{{ project.repo_name }}</h2>
    {% elif workflow %}
        <h2>{{ workflow }} Workflow Runs</h2>
    {% else %}
        <h2>Workflow Runs</h2>
    {% endif %}

    {% if runs %}
    <table border="1">
        <tr>
            <th>Build ID</th>
            <th>Run Number</th>
            <th>Status</th>
            <th>Conclusion</th>
            <th>Branch</th>
            <th>Created At</th>
            <th>URL</th>
        </tr>
        {% for run in runs %}
        <tr>
            <td>{{ run.id }}</td>
            <td>{{ run.run_number }}</td>
            <td class="status">{{ run.status }}</td>
            <td>{{ run.conclusion }}</td>
            <td>{{ run.head_branch }}</td>
            <td>{{ run.created_at }}</td>
            <td><a href="{{ run.html_url }}" target="_blank">View on GitHub</a></td>
        </tr>
        {% endfor %}
    </table>
    {% else %}
        <p>No workflow runs found.</p>
    {% endif %}

    <a href="/">Back to Dashboard</a>
</body>
</html>
